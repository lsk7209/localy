# 자동 배포 가이드

## 개요

개발 완료 시 자동으로 깃허브에 배포하는 스크립트입니다.

## 사용 방법

### 기본 사용

```bash
npm run deploy
```

또는

```bash
npm run deploy:auto
```

### 동작 과정

1. **변경사항 확인**: Git 상태 확인
2. **빌드 확인**: `npm run build` 실행 (실패해도 계속 진행)
3. **린트 확인**: `npm run lint` 실행 (경고 있어도 계속 진행)
4. **스테이징**: 모든 변경사항을 `git add .`로 스테이징
5. **커밋**: 자동으로 커밋 메시지 생성 후 커밋
6. **푸시**: 현재 브랜치를 `origin`에 푸시

### 커밋 메시지 형식

자동으로 생성되는 커밋 메시지:

```
chore: 자동 배포 - 2025-01-15 12:34:56

- 자동 배포 스크립트 실행
- 브랜치: main
- 변경사항: 자동 커밋
```

## 주의사항

1. **빌드 실패**: 빌드가 실패해도 배포는 계속 진행됩니다.
2. **린트 경고**: 린트 경고가 있어도 배포는 계속 진행됩니다.
3. **커밋 실패**: 이미 커밋된 변경사항이 있으면 스킵됩니다.
4. **푸시 실패**: 원격 저장소와 충돌이 있으면 실패합니다.

## 수동 커밋 메시지 사용

자동 커밋 메시지 대신 수동으로 커밋하고 싶다면:

```bash
# 1. 변경사항 스테이징
git add .

# 2. 커밋 (원하는 메시지로)
git commit -m "feat: 새로운 기능 추가"

# 3. 푸시
git push origin main
```

## Cloudflare Pages 자동 배포

깃허브에 푸시되면 Cloudflare Pages가 자동으로 배포를 시작합니다.

- **배포 확인**: Cloudflare Dashboard → Pages → Deployments
- **배포 로그**: 각 배포의 Build Logs에서 확인 가능

## 문제 해결

### 푸시 실패 시

```bash
# 원격 저장소와 동기화
git pull origin main

# 다시 배포
npm run deploy
```

### 빌드 에러 확인

```bash
# 빌드만 실행
npm run build

# 에러 확인 후 수정
```

### 린트 에러 확인

```bash
# 린트만 실행
npm run lint

# 에러 확인 후 수정
```

## 스크립트 커스터마이징

`scripts/auto-deploy.js` 파일을 수정하여 커스터마이징할 수 있습니다:

- 커밋 메시지 형식 변경
- 빌드/린트 체크 강제화
- 추가 검증 단계 추가

