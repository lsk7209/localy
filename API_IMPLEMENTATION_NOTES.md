# Open API κµ¬ν„ λ…ΈνΈ

## π“‹ ν„μ¬ κµ¬ν„ μƒνƒ

### λ κ±°μ‹ API (κΈ°λ³Έ μ‚¬μ©)
- **URL**: `https://apis.data.go.kr/B553077/api/open/sdsc2/storeListInDong`
- **νλΌλ―Έν„°**: `serviceKey`, `key` (ν–‰μ •λ™ μ½”λ“), `type`, `numOfRows`, `pageNo`
- **μ‘λ‹µ κµ¬μ΅°**: `{ response: { body: { items: [...], totalCount, numOfRows, pageNo } } }`
- **μƒνƒ**: β… μ™„μ „ κµ¬ν„ λ° ν…μ¤νΈλ¨

### μƒλ΅μ΄ Open API (μµμ…)
- **Base URL**: `api.odcloud.kr/api`
- **μ—”λ“ν¬μΈνΈ**: `/15083033/v1/uddi:c7049f5a-d95e-4143-be96-b4d3c16130ee`
- **Swagger λ¬Έμ„**: https://infuser.odcloud.kr/oas/docs?namespace=15083033/v1
- **μƒνƒ**: π΅ λ¶€λ¶„ κµ¬ν„ (Swagger λ¬Έμ„ ν™•μΈ ν•„μ”)

## π” Open API κµ¬ν„ μ„Έλ¶€μ‚¬ν•­

### ν„μ¬ κµ¬ν„λ νλΌλ―Έν„°
```typescript
{
  serviceKey: string,  // μΈμ¦ν‚¤
  page: number,        // νμ΄μ§€ λ²νΈ (1λ¶€ν„° μ‹μ‘)
  perPage: number      // νμ΄μ§€λ‹Ή ν•­λ© μ
}
```

### ν™•μΈ ν•„μ”ν• μ‚¬ν•­ (Swagger λ¬Έμ„ ν™•μΈ ν•„μ”)

1. **ν–‰μ •λ™ μ½”λ“ ν•„ν„°λ§ λ°©λ²•**
   - κ°€λ¥ν• λ°©λ²•:
     - `cond[ν–‰μ •λ™μ½”λ“::EQ]=1168010100` (odcloud.kr μΌλ° ν•μ‹)
     - `key=1168010100` (λ κ±°μ‹μ™€ λ™μΌ)
     - λ‹¤λ¥Έ ν•„ν„° νλΌλ―Έν„°
   
2. **μ‘λ‹µ κµ¬μ΅°**
   - κ°€λ¥ν• κµ¬μ΅°:
     - `{ data: [...], currentCount, matchCount, page, perPage, totalCount }` (odcloud.kr μΌλ° ν•μ‹)
     - `{ response: { body: { items: [...] } } }` (λ κ±°μ‹μ™€ λ™μΌ)
     - λ‹¤λ¥Έ κµ¬μ΅°

3. **ν•„λ“λ…**
   - ν–‰μ •λ™ μ½”λ“ ν•„λ“λ…: `ν–‰μ •λ™μ½”λ“`, `admCd`, `dongCode`, `μ‹κµ°κµ¬μ½”λ“` λ“±
   - μƒκ°€ ID ν•„λ“λ…: `source_id`, `bizesId`, `bizId`, `id` λ“±
   - μƒκ°€λ… ν•„λ“λ…: `name`, `μƒκ°€λ…`, `storeName` λ“±

### ν„μ¬ κµ¬ν„μ μ μ—°μ„±

ν„μ¬ κµ¬ν„μ€ λ‹¤μκ³Ό κ°™μ΄ μ μ—°ν•κ² μ²λ¦¬ν•©λ‹λ‹¤:

1. **μ‘λ‹µ κµ¬μ΅° μλ™ κ°μ§€**
   - `data` ν•„λ“ ν™•μΈ
   - `response.body.items` ν•„λ“ ν™•μΈ
   - μ§μ ‘ λ°°μ—΄ ν™•μΈ
   - `items` ν•„λ“ ν™•μΈ

2. **ν–‰μ •λ™ μ½”λ“ ν•„ν„°λ§**
   - APIμ—μ„ ν•„ν„°λ§λμ§€ μ•μ€ κ²½μ° ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ ν•„ν„°λ§
   - λ‹¤μ–‘ν• ν•„λ“λ… μ‹λ„: `ν–‰μ •λ™μ½”λ“`, `admCd`, `dongCode`, `μ‹κµ°κµ¬μ½”λ“` λ“±

3. **μƒμ„Έ λ΅κΉ…**
   - μ‘λ‹µ κµ¬μ΅° μ „μ²΄ λ΅κΉ…
   - μ²« λ²μ§Έ ν•­λ©μ ν‚¤ λ©λ΅ λ΅κΉ…
   - ν•„ν„°λ§ μ „ν›„ κ°μ λ΅κΉ…

## π§ ν…μ¤νΈ λ°©λ²•

### 1. ν…μ¤νΈ μ—”λ“ν¬μΈνΈ μ‚¬μ©
```
GET /api/test/public-data-api?dongCode=1168010100&pageNo=1
```

### 2. ν™κ²½ λ³€μ μ„¤μ •
```bash
# λ κ±°μ‹ API μ‚¬μ© (κΈ°λ³Έ)
PUBLIC_DATA_API_KEY=your_key

# μƒλ΅μ΄ Open API μ‚¬μ©
PUBLIC_DATA_API_VERSION=open
PUBLIC_DATA_API_KEY=your_key
```

### 3. λ΅κ·Έ ν™•μΈ
- Cloudflare λ΅κ·Έμ—μ„ λ‹¤μ λ©”μ‹μ§€ ν™•μΈ:
  - `"Using new Open API"` - Open API μ‚¬μ© ν™•μΈ
  - `"Open API response received"` - μ‘λ‹µ κµ¬μ΅° ν™•μΈ
  - `"Open API returned stores"` - λ°ν™λ ν•­λ© μ ν™•μΈ

## π“ λ‹¤μ λ‹¨κ³„

1. **Swagger λ¬Έμ„ ν™•μΈ**
   - https://infuser.odcloud.kr/oas/docs?namespace=15083033/v1
   - μ •ν™•ν• νλΌλ―Έν„° κµ¬μ΅° ν™•μΈ
   - μ‘λ‹µ κµ¬μ΅° ν™•μΈ

2. **μ‹¤μ  API ν…μ¤νΈ**
   - `/api/test/public-data-api` μ—”λ“ν¬μΈνΈλ΅ ν…μ¤νΈ
   - μ‘λ‹µ κµ¬μ΅° ν™•μΈ
   - ν•„λ“λ… ν™•μΈ

3. **μ½”λ“ μ—…λ°μ΄νΈ**
   - Swagger λ¬Έμ„ κΈ°λ°μΌλ΅ μ •ν™•ν• νλΌλ―Έν„° μ‚¬μ©
   - μ‘λ‹µ κµ¬μ΅° νμ‹± λ΅μ§ μ •ν™•ν™”
   - ν•„λ“λ… λ§¤ν•‘ μ •ν™•ν™”

## β οΈ μ£Όμμ‚¬ν•­

1. **ν–‰μ •λ™ μ½”λ“ ν•„ν„°λ§**
   - ν„μ¬λ” APIμ—μ„ ν•„ν„°λ§λμ§€ μ•μ€ κ²½μ° ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ ν•„ν„°λ§
   - Swagger λ¬Έμ„ ν™•μΈ ν›„ API λ λ²¨ ν•„ν„°λ§μΌλ΅ κ°μ„  ν•„μ”

2. **νμ΄μ§€λ„¤μ΄μ…**
   - `page`μ™€ `perPage` νλΌλ―Έν„° μ‚¬μ©
   - `totalCount` ν™•μΈν•μ—¬ λ‹¤μ νμ΄μ§€ μ΅΄μ¬ μ—¬λ¶€ νλ‹¨

3. **μ—λ¬ μ²λ¦¬**
   - API μ—λ¬ μ‘λ‹µ κµ¬μ΅° ν™•μΈ ν•„μ”
   - μ μ ν• μ—λ¬ λ©”μ‹μ§€ μ²λ¦¬

## π”— μ°Έκ³  λ§ν¬

- **Swagger λ¬Έμ„**: https://infuser.odcloud.kr/oas/docs?namespace=15083033/v1
- **κ³µκ³µλ°μ΄ν„°ν¬ν„Έ**: https://www.data.go.kr
- **API λ¬Έμ„**: `PUBLIC_DATA_API_LINKS.md`

